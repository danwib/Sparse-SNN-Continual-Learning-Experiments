experiment_name: "mnist_split_surrogate_distill"

seed: 123
device: "cpu"

data:
  root: "./data"
  batch_size: 64
  num_workers: 4
  splits:
    - [0, 1, 2, 3, 4]
    - [5, 6, 7, 8, 9]

model:
  input_size: 784
  hidden_size: 4096
  output_size: 10
  time_steps: 10
  v_th: 1.0

train:
  epochs_per_task: [3, 6]
  lr: 0.001
  usage_decay: 0.99
  usage_alpha: 10.0
  use_controller: false

  do_consolidation: true
  consolidation_epochs: 2
  max_consolidation_batches: null

  replay_buffer_size: 4000

  lambda_spike: 0.0005
  lambda_weight: 0.00005
  lambda_usage_weight: 10.0
  prune_threshold: 0.0005
  max_batches_per_epoch: null
  truncate_window: null

  lambda_stab: 0.5
  stability_mode: "distillation"
  stability_buffer_size: 2000
  stability_surrogate:
    enabled: true
    warmup_batches: 128
    hidden_dim: 128
    num_layers: 3
    lr: 0.001
    epochs: 300
    batch_size: 64
    gate_beta: 25.0
